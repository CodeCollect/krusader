<appendix id="useraction_xml">
  <!-- **********************************************************************
                               installation.docbook
                            ++++++++++++++++++++++++++
  copyright            : (C) 2000, 2001, 2002, 2003, 2004, 2005, 2006
                          Rafi Yanai, Shie Erlich, Frank Schoolmeesters
                          & the Krusader Krew
  e-mail               : krusader@users.sourceforge.net
  web site             : http://www.krusader.org
  description          : a Krusader Documentation File

***************************************************************************
* Permission is granted to copy, distribute and/or modify this            *
* document under the terms of the GNU Free Documentation License,         *
* Version 1.1 or any later version published by the Free Software         *
* Foundation; with no Invariant Sections, no Front-Cover Texts and        *
* no Back-Cover Texts.  A copy of the license is available on the         *
* GNU site http://www.gnu.org/licenses/fdl.html or by writing to:         *
* Free Software Foundation, Inc., 59 Temple Place - Suite 330, Boston,    *
* MA 02111-1307, USA.                                                     *
*********************************************************************** -->
  <title>useraction.xml</title>
  <para>This appendix gives several examples of 
  <filename>useraction.xml</filename>files. With this you can begin
  to discover the power of the &amp;useractions_lnk; and start
  learning how to use them. Once you understand how to write
  UserActions you will find that &amp;krusader; is an even more
  powerful, customizable tool.</para>
  <para>Please consider to upload your UserActions at
  &amp;kde_files_url;. We are collecting UserActions, if your
  UserAction is selected by us it will be shipped with
  &amp;krusader; at the next release. We provide also an
  &amp;useractionsforum_url;.</para>
  <itemizedlist>
    <listitem>
      <para>Runs 
      <command>uptime</command>
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="uptime" &gt;
      &lt;title&gt;Up-time&lt;/title&gt; &lt;tooltip&gt;tells how
      long since the computer has been booted&lt;/tooltip&gt;
      &lt;icon&gt;clock&lt;/icon&gt;
      &lt;category&gt;information&lt;/category&gt;
      &lt;description&gt;tells how long since the computer has been
      booted&lt;/description&gt; &lt;command
      executionmode="collect_output" &gt;uptime&lt;/command&gt;
      &lt;defaultshortcut&gt;Alt+Ctrl+U&lt;/defaultshortcut&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Runs 
      <command>ls -l</command>
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="ls -l" &gt;
      &lt;title&gt;ls -l in current dir&lt;/title&gt;
      &lt;description&gt;Runs ls -l in current
      dir&lt;/description&gt; &lt;command
      executionmode="collect_output" &gt;ls -l %aPath%
      %oPath%&lt;/command&gt; &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Echo Placeholder 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action
      name="test_placeholder" &gt; &lt;title&gt;Echo
      Placeholder&lt;/title&gt; &lt;tooltip&gt;Echo's the
      placeholder values&lt;/tooltip&gt;
      &lt;category&gt;Testing&lt;/category&gt;
      &lt;description&gt;Echo's the placeholder
      values&lt;/description&gt; &lt;command
      executionmode="collect_output" onmultiplefiles="call_each"
      &gt;echo -e "aPath %aPath()% \naCurrent:
      %aCurrent()%"&lt;/command&gt; &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>This useraction copies current path and filename to
      clipboard: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="clipboard
      current" &gt; &lt;title&gt;Copy to Clipboard&lt;/title&gt;
      &lt;tooltip&gt;Copy to clipboard&lt;/tooltip&gt;
      &lt;icon&gt;klipper&lt;/icon&gt;
      &lt;category&gt;System&lt;/category&gt;
      &lt;description&gt;Copy current path and filename to
      clipboard&lt;/description&gt;
      &lt;command&gt;%_Clipboard("%aCurrent%")%&lt;/command&gt;
      &lt;defaultshortcut&gt;Win+C&lt;/defaultshortcut&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Selects 
      <literal role="extension">.diff</literal>and 
      <literal role="extension">*.h</literal>in the active panel: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="test_select"
      &gt; &lt;title&gt;Add selection *.diff and *.h&lt;/title&gt;
      &lt;category&gt;Selection&lt;/category&gt;
      &lt;command&gt;%aSelect("*.diff", "add")% %aSelect("*.h",
      "add")%&lt;/command&gt; &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Active panel changes to 
      <filename>mnt/floppy</filename>(bookmark): 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt; &lt;action
      name="mnt/floppy bookmark" &gt; &lt;title&gt;Jump to
      /mnt/floppy&lt;/title&gt;
      &lt;category&gt;Bookmarks&lt;/category&gt;
      &lt;command&gt;%aGoto("/mnt/floppy", "yes")%&lt;/command&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Select in the non-active panel, all filenames that are
      highlighted in the active panel: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt; &lt;action
      name="asdfasdf" &gt; &lt;title&gt;Select in Other
      Panel&lt;/title&gt;
      &lt;category&gt;Selection&lt;/category&gt;
      &lt;description&gt;Select all filenames that are selected in
      the active panel, also in the non-active
      panel&lt;/description&gt;
      &lt;command&gt;%oSelect("%aList("selected", " ",
      "Yes")%")%&lt;/command&gt; &lt;/action&gt;
      &lt;/KrusaderUserActions</programlisting></para>
    </listitem>
    <listitem>
      <para>Make a backup of the current file/folder to 
      <filename>foo.bak</filename>into the current directory: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="backup current"
      &gt; &lt;title&gt;Backup in Current Directory&lt;/title&gt;
      &lt;tooltip&gt;Backup in current directory&lt;/tooltip&gt;
      &lt;icon&gt;filesaveas&lt;/icon&gt;
      &lt;category&gt;System&lt;/category&gt;
      &lt;description&gt;Backup in current
      directory&lt;/description&gt;
      &lt;command&gt;%_Copy("%aCurrent%", "%_Ask("new name",
      "%aCurrent%.bak")")%&lt;/command&gt;
      &lt;defaultshortcut&gt;Shift+F5&lt;/defaultshortcut&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Opens 
      <link linkend="krusearcher">KruSearcher</link>: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="search" &gt;
      &lt;title&gt;Search Test&lt;/title&gt;
      &lt;command&gt;%_NewSearch("Search 2")%&lt;/command&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Sets the selected picture as wallpaper: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="set wallpaper"
      &gt; &lt;title&gt;Set as Wallpaper&lt;/title&gt;
      &lt;tooltip&gt;Set as wallpaper&lt;/tooltip&gt;
      &lt;icon&gt;image&lt;/icon&gt; &lt;category&gt;Service
      Menu&lt;/category&gt; &lt;description&gt;Set as wallpaper
      (scaled)&lt;/description&gt; &lt;command&gt;dcop kdesktop
      KBackgroundIface setWallpaper "%aCurrent%" 6&lt;/command&gt;
      &lt;defaultshortcut&gt;Win+W&lt;/defaultshortcut&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>This useraction edits a file with root permissions
      using 
      <command>kdesu</command>: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="edit as root"
      &gt; &lt;title&gt;Edit as Root&lt;/title&gt;
      &lt;tooltip&gt;Edit as root&lt;/tooltip&gt;
      &lt;icon&gt;kwrite&lt;/icon&gt;
      &lt;category&gt;System&lt;/category&gt;
      &lt;description&gt;Edit a file with root permissions using
      kdesu&lt;/description&gt; &lt;command&gt;kdesu kedit
      %aCurrent%&lt;/command&gt;
      &lt;defaultshortcut&gt;Win+F4&lt;/defaultshortcut&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>This useraction Add item(s) to Amarok playlist: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="amarok enqueue"
      &gt; &lt;title&gt;Enqueue in Amarok&lt;/title&gt;
      &lt;tooltip&gt;Append selected item(s) to Amarok
      playlist&lt;/tooltip&gt; &lt;icon&gt;amarok&lt;/icon&gt;
      &lt;category&gt;Multimedia&lt;/category&gt;
      &lt;description&gt;Append selected item(s) to Amarok
      playlist&lt;/description&gt; &lt;command&gt;amarok --append
      %aList("Selected")%&lt;/command&gt;
      &lt;defaultshortcut&gt;Win+A&lt;/defaultshortcut&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Opens &amp;synchronizer_lnk;: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="synchronizer"
      &gt; &lt;title&gt;Synchronizer&lt;/title&gt;
      &lt;command&gt;%_Sync("Sync 2")%&lt;/command&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Copy selected files &amp; directories with root
      privileges (also inside archives): 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="root_copy" &gt;
      &lt;title&gt;Copy as "root"&lt;/title&gt; &lt;tooltip&gt;Copy
      as "root"&lt;/tooltip&gt; &lt;icon&gt;editcopy&lt;/icon&gt;
      &lt;category&gt;Selection&lt;/category&gt;
      &lt;description&gt;Copy selected files &amp; directories with
      root privileges, also inside archives!&lt;/description&gt;
      &lt;command run_as="root" accept="url"&gt;kfmclient copy
      %aList("Selected", " ", "No")% %oPath%&lt;/command&gt;
      &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Search and replace a strings and regular expressions in
      textfiles using 
      <command>sed</command>: 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action name="search_replace"
      &gt; &lt;title&gt;Simple Search and Replace&lt;/title&gt;
      &lt;tooltip&gt;Search and replace a string/regex in
      textfiles&lt;/tooltip&gt;
      &lt;icon&gt;kcachegrind&lt;/icon&gt;
      &lt;category&gt;Samples&lt;/category&gt;
      &lt;description&gt;This UA uses the UNIX standard-tool sed
      (the stream-editor) so perform search and replace operations
      in all selected files It is possible to give a regular
      expression for both strings. Please note: The sed-command is
      "s/search/repleace/", so you have to escape the slash when
      you need it!&lt;/description&gt; &lt;command&gt;sed -i -e
      's/%_Ask("Search for:")%/%_Ask("Replace with:")%/'
      %aList("Selected")%&lt;/command&gt; &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
    <listitem>
      <para>Converts content of selected text-files from
      ISO-8859-15 to UTF8 and vice versa using 
      <command>iconv</command>(also inside archives): 
      <programlisting>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
      &lt;!DOCTYPE KrusaderUserActions&gt;
      &lt;KrusaderUserActions&gt; &lt;action
      name="iso8859-15_to_utf8" &gt; &lt;title&gt;ISO 8859-15 =&gt;
      UTF8&lt;/title&gt; &lt;tooltip&gt;convert
      characterset&lt;/tooltip&gt;
      &lt;icon&gt;editcopy&lt;/icon&gt;
      &lt;category&gt;Selection&lt;/category&gt;
      &lt;description&gt;Converts content of selected text-files
      from ISO-8859-15 to UTF8&lt;/description&gt;
      &lt;command&gt;sh -c 'cd %aPath%; for i in %aList("Selected",
      " ", "Yes")% ; do iconv -f iso8859-15 -t utf-8 "$i" -o
      %oPath%"$i"; done '&lt;/command&gt; &lt;/action&gt;
      &lt;action name="utf8_to_iso8859-15" &gt; &lt;title&gt;UTF8
      =&gt; ISO 8859-15&lt;/title&gt; &lt;tooltip&gt;convert
      characterset&lt;/tooltip&gt;
      &lt;icon&gt;editcopy&lt;/icon&gt;
      &lt;category&gt;Selection&lt;/category&gt;
      &lt;description&gt;Converts content of selected text-files
      from UTF8 to ISO-8859-15&lt;/description&gt;
      &lt;command&gt;sh -c 'cd %aPath%; for i in %aList("Selected",
      " ", "Yes")% ; do iconv -f utf-8 -t iso8859-15 "$i" -o
      %oPath%"$i"; done '&lt;/command&gt; &lt;/action&gt;
      &lt;/KrusaderUserActions&gt;</programlisting></para>
    </listitem>
  </itemizedlist>
</appendix>
